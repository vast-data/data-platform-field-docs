
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>VastDB restore procedure &#8212; Data Platform Field Docs</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'vast_database/admin/restore';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Secure Deployment Pattern" href="secure_deployment.html" />
    <link rel="prev" title="Vast DB set up using API" href="vastdb_py_setup.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt="Data Platform Field Docs - Home"/>
    <img src="../../_static/logo.png" class="logo__image only-dark pst-js-only" alt="Data Platform Field Docs - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    Welcome!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Vast Platform</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../vast_dataplatform/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vast_dataplatform/architectures.html">Reference Architectures</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Vast Datastore</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../vast_datastore/overview.html">Overview</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../vast_datastore/vastpy/overview.html">Vastpy Library</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../vast_datastore/vastpy/enablecatalog.html">Enable Catalog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../vast_datastore/vastpy/vastdb_py_setup.html">Vast DB set up using API</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../vast_datastore/nifi/overview.html">Apache NiFi</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../vast_datastore/nifi/quickstart.html">NiFi 2.x Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../vast_datastore/nifi/tagging_s3/overview.html">Tagging Datastore S3 Objects</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../vast_datastore/kafka_connect.html">Kafka Connect to Vast S3</a></li>



</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Vast Database</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../overview/overview.html">Overview</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../overview/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/limits.html">Dimensions and Limits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/datatypes.html">Datatypes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/nrt.html">Near real-time workloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview/replication.html">Replication</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/getting_started.html">Getting Started</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ingestion/ingestion.html">Data Ingest/Transformation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/python.html">Python Data Ingestion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/python_sdk_json_import.html">Python SDK - import JSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/python_sdk_csv_import.html">Python SDK - import CSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/python_sdk_parquet_import.html">Python SDK - import Parquet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/python_sdk_grib2_import.html">Python SDK - import Grib2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/nifi.html">Apache NiFi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/spark.html">Spark Data Ingestion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/python_kafka.html">Kafka via Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/spark_streaming_python_sdk.html">Kafka via Spark Streaming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/trino.html">Trino with Vast Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/query_time_merge.html">Query Merge vs Insert Merge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/spark_merge_on_read_with_id.html">Spark Query Time Merge (id)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/spark_merge_on_read_without_id.html">Spark Query Time Merge (non-id)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/trino_merge_on_read_with_id.html">Trino Query Time Merge (id)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/trino_merge_on_read_without_id.html">Trino Query Time Merge (non-id)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ingestion/apache_beam_python.html">Apache Beam Sink (Python)</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../query/query.html">Data Querying</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../query/dremio_quickstart/howto.html">Dremio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../query/python.html">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../query/spark.html">Spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../query/trino.html">Trino</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../sdk_ref/intro.html">Python SDK Guide</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../sdk_ref/create_session.html">Create Session</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk_ref/schema_management.html">Scheme Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk_ref/table_management.html">Table Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk_ref/column_management.html">Column Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk_ref/querying.html">Querying Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk_ref/limit_n.html">Query with ‘LIMIT n’</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk_ref/projections.html">Projections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk_ref/manipulation.html">Manipulating Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk_ref/verify_parquet.html">Utility: Verify Parquet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk_ref/importing_files.html">Importing Files using API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk_ref/importing_files_pandas.html">Importing Files using Pandas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk_ref/snapshots.html">Snapshots Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk_ref/transactions.html">Transaction Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk_ref/tuning.html">Performance Tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk_ref/recordbatchreader.html">RecordBatchReader functionality</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../spark/overview.html">Apache Spark</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../spark/operations_guide.html">Spark Operations Guide</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tuning/tuning.html">Performance Tuning</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../tuning/python/howto.html">Tuning Python SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tuning/trino/howto.html">Tuning Trino</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../nifi/overview.html">Apache NiFi</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../nifi/quickstart.html">NiFi 2.x Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nifi/bulk_import.html">Bulk Import from S3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nifi/salesforce/query.html">Salesforce to VAST DB</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../trino/overview.html">Trino</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../trino/quickstart.html">Trino Quickstart</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="overview.html">Admininstration</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="vastdb_py_setup.html">Vast DB set up using API</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">VastDB restore procedure</a></li>
<li class="toctree-l2"><a class="reference internal" href="secure_deployment.html">Secure Deployment Pattern</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../misc/overview.html">Extras</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../misc/python_sdk_json_import.html">Python SDK - import JSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/python_sdk_csv_import.html">Python SDK - import CSV</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Vast Catalog</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../vast_catalog/overview.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vast_catalog/python-sdk-vast-catalog.html">Python SDK Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vast_catalog/trino_quickstart/howto.html">Trino Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vast_catalog/blogs/intro.html">Blogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vast_catalog/jupyter/catalog.html">Query Catalog via Jupyter and Trino</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vast_catalog/jupyter/auditlog.html">Query Audit Log via Jupyter and Trino</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Vast Data Engine</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../vast_dataengine/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vast_dataengine/getting_started.html">Getting Started</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Site Info</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../feedback/intro.html">Feedback</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/vast-data/data-platform-field-docs" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/vast-data/data-platform-field-docs/issues/new?title=Issue%20on%20page%20%2Fvast_database/admin/restore.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/vast_database/admin/restore.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>VastDB restore procedure</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#use-case-example">Use-Case example</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-configuration">Example Configuration</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#script-sections-to-edit">Script Sections to Edit</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Example Configuration</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#usage-example">Usage Example</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-usage-demo">Quick Usage Demo</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#key-functions-explained">Key Functions Explained</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#restore-table-schema-name-table-name-snapshot-tx-config"><code class="docutils literal notranslate"><span class="pre">restore_table(schema_name,</span> <span class="pre">table_name,</span> <span class="pre">snapshot,</span> <span class="pre">tx,</span> <span class="pre">config)</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#process-all-schemas-snapshot-tx-config"><code class="docutils literal notranslate"><span class="pre">process_all_schemas(snapshot,</span> <span class="pre">tx,</span> <span class="pre">config)</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#duckdb-integration"><code class="docutils literal notranslate"><span class="pre">DuckDB</span> <span class="pre">Integration</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#troubleshooting-tips">Troubleshooting Tips</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="vastdb-restore-procedure">
<h1>VastDB restore procedure<a class="headerlink" href="#vastdb-restore-procedure" title="Link to this heading">#</a></h1>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>These instructions are BETA.</p>
</div>
<p>This document explains the steps involved in restoring a VastDB backup using the provided script. Below, we break down what the script does and how to use it effectively, along with usage examples.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Note that database restore consume the SAME amount of storage space as the original database</p>
</div>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>The provided script automates the process of restoring data from a VastDB snapshot to a new bucket in VastDB. It is divided into several key parts:</p>
<ol class="arabic simple">
<li><p><strong>Configuration Setup:</strong> The script defines configuration settings such as VastDB endpoint, access keys, bucket names, and snapshot details using the Pydantic library. These settings are then used throughout the script to connect to the database and perform operations.</p></li>
<li><p><strong>Logging and Debugging:</strong> Logging is set up to facilitate debugging, allowing you to monitor the script’s progress and identify any issues that arise.</p></li>
<li><p><strong>Connecting to VastDB and DuckDB:</strong> The script establishes a connection to the VastDB instance using the provided configuration. It also connects to DuckDB, which is used later for querying the restored data.</p></li>
<li><p><strong>Restoring Tables:</strong> The core function, <code class="docutils literal notranslate"><span class="pre">restore_table()</span></code>, restores each table from the snapshot to the new bucket. It checks if the schema and tables already exist and creates them if they do not.</p></li>
<li><p><strong>Processing All Schemas:</strong> The function <code class="docutils literal notranslate"><span class="pre">process_all_schemas()</span></code> iterates through all schemas in the snapshot and calls <code class="docutils literal notranslate"><span class="pre">restore_table()</span></code> for each table within each schema.</p></li>
<li><p><strong>Executing Queries with DuckDB:</strong> After the data is restored, the script executes queries using DuckDB to verify the restored data.</p></li>
</ol>
</section>
<section id="use-case-example">
<h2>Use-Case example<a class="headerlink" href="#use-case-example" title="Link to this heading">#</a></h2>
<p>Imagine a user managing a VastDB database for their organization’s data analytics. The database, named “solutions-analytics-db”, is critical for daily reporting. The user takes periodic snapshots of the database to ensure they have a reliable backup in case anything goes wrong. One day, due to a system error or accidental data corruption, the database becomes unusable, and they need to restore it to an earlier state. Fortunately, they have a recent snapshot called “daily-backup-2024-10-01”. The provided script allows the user to restore their database from this snapshot to a new bucket, enabling them to quickly get back to normal operations without losing much data.</p>
<section id="example-configuration">
<h3>Example Configuration<a class="headerlink" href="#example-configuration" title="Link to this heading">#</a></h3>
<p>Below is the configuration needed for the script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define configuration directly using pydantic without relying on env variables  </span>
<span class="k">class</span> <span class="nc">ConsumeConfig</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>  
	<span class="n">vastdb_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;http://example-vastdb-endpoint.com&quot;</span><span class="p">)</span>  
	<span class="n">vastdb_access_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;AKIAX1234567890EXAMPLE&quot;</span><span class="p">)</span>  
	<span class="n">vastdb_secret_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY&quot;</span><span class="p">)</span>  
	<span class="n">vastdb_bucket</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;solutions-analytics-db&quot;</span><span class="p">)</span>  
	<span class="n">vastdb_new_bucket</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;your-new-bucket-name&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="script-sections-to-edit">
<h2>Script Sections to Edit<a class="headerlink" href="#script-sections-to-edit" title="Link to this heading">#</a></h2>
<section id="id1">
<h3>Example Configuration<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>Here is an example of how the configuration should look like when properly filled out:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define configuration directly using pydantic without relying on env variables  </span>
<span class="k">class</span> <span class="nc">ConsumeConfig</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>  
	<span class="n">vastdb_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;http://example-vastdb-endpoint.com&quot;</span><span class="p">)</span>  
	<span class="n">vastdb_access_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;AKIAX1234567890EXAMPLE&quot;</span><span class="p">)</span>  
	<span class="n">vastdb_secret_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY&quot;</span><span class="p">)</span>  
	<span class="n">vastdb_bucket</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;bucket1&quot;</span><span class="p">)</span>  
	<span class="n">vastdb_snapshot</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;bucket1/.snapshot/dotan-restore-bigdb&quot;</span><span class="p">)</span>  
	<span class="n">vastdb_new_bucket</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;your-new-bucket-name&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>You need to update the following fields as per your environment:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">vastdb_endpoint</span></code>: The endpoint URL of your VastDB instance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vastdb_access_key</span></code> and <code class="docutils literal notranslate"><span class="pre">vastdb_secret_key</span></code>: Your VastDB access credentials.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vastdb_bucket</span></code>: The name of the bucket containing the snapshot.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vastdb_new_bucket</span></code>: The target bucket (VastDB) where the restored data will be placed.</p></li>
</ul>
<p>One you fill all needed information you can run the script, The script will now search for avilble snapshots within the bucket and will prompt you to select the Snapshot you wish to restore from, select the desired snapshot and hit enter, the restore phase will now start.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## </span>

<span class="c1">## The actual script</span>

<span class="c1">## </span>

<span class="kn">import</span> <span class="nn">vastdb</span>  
<span class="kn">import</span> <span class="nn">duckdb</span>  
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>  
<span class="kn">from</span> <span class="nn">ibis</span> <span class="kn">import</span> <span class="n">_</span>  
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">Field</span>  
<span class="kn">from</span> <span class="nn">pydantic_settings</span> <span class="kn">import</span> <span class="n">BaseSettings</span>  
<span class="kn">import</span> <span class="nn">logging</span>  
<span class="kn">import</span> <span class="nn">multiprocessing</span>  
<span class="kn">from</span> <span class="nn">vastdb.util</span> <span class="kn">import</span> <span class="n">expand_ip_ranges</span>  
   
<span class="c1"># Setup logging for debugging  </span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>  
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>  
   
   
<span class="c1"># Define configuration directly using pydantic without relying on env variables  </span>
<span class="k">class</span> <span class="nc">ConsumeConfig</span><span class="p">(</span><span class="n">BaseSettings</span><span class="p">):</span>  
	<span class="n">vastdb_endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;http://vippool-1.vast136-kfs.VastENG.lab&quot;</span><span class="p">)</span>  
	<span class="n">vastdb_access_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;9xxxxxxxxxxffffffdeddddddd0&quot;</span><span class="p">)</span>  
	<span class="n">vastdb_secret_key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;8xxxxxxxxxxxkkdjdjdkdxxxxxxxR&quot;</span><span class="p">)</span>  
	<span class="n">vastdb_bucket</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;dotandb&quot;</span><span class="p">)</span>  
	<span class="n">vastdb_new_bucket</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="s2">&quot;dotandb-restored&quot;</span><span class="p">)</span>  
   
   
<span class="c1"># Load configuration  </span>
<span class="n">config</span> <span class="o">=</span> <span class="n">ConsumeConfig</span><span class="p">()</span>  
   
<span class="c1"># Log configuration values for debugging  </span>
<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configured VASTDB endpoint: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">vastdb_endpoint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configured VASTDB access key: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">vastdb_access_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configured VASTDB secret key: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">vastdb_secret_key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configured VASTDB bucket: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">vastdb_bucket</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Configured VASTDB new bucket: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">vastdb_new_bucket</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
   
<span class="c1"># Explicitly print endpoint value for direct verification  </span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Using VASTDB endpoint: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">vastdb_endpoint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
   
<span class="c1"># Attempt to connect to the VAST instance  </span>
<span class="k">try</span><span class="p">:</span>  
	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Attempting to connect to the VAST instance...&quot;</span><span class="p">)</span>  
	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connecting to endpoint: </span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">vastdb_endpoint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
	<span class="n">session</span> <span class="o">=</span> <span class="n">vastdb</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>  
    	<span class="n">endpoint</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">vastdb_endpoint</span><span class="p">,</span>  
    	<span class="n">access</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">vastdb_access_key</span><span class="p">,</span>  
    	<span class="n">secret</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">vastdb_secret_key</span>  
	<span class="p">)</span>  
	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Connection successful\!&quot;</span><span class="p">)</span>  
<span class="k">except</span> <span class="n">vastdb</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">ConnectionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  
	<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to connect: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
	<span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  
	<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An unexpected error occurred: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
	<span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  
   
<span class="c1"># Connect to DuckDB  </span>
<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Connecting to DuckDB...&quot;</span><span class="p">)</span>  
<span class="n">conn</span> <span class="o">=</span> <span class="n">duckdb</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>  
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Connected to DuckDB successfully.&quot;</span><span class="p">)</span>  
   
   
<span class="c1"># Function to restore data for a single table  </span>
<span class="k">def</span> <span class="nf">restore_table</span><span class="p">(</span><span class="n">schema_name</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">restored_batches</span><span class="p">):</span>  
	<span class="k">try</span><span class="p">:</span>  
    	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Accessing schema &#39;</span><span class="si">{</span><span class="n">schema_name</span><span class="si">}</span><span class="s2">&#39; and table &#39;</span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&#39;...&quot;</span><span class="p">)</span>  
    	<span class="n">get_table</span> <span class="o">=</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">schema</span><span class="p">(</span><span class="n">schema_name</span><span class="p">)</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">table_name</span><span class="p">)</span>  
    	<span class="n">table_schema</span> <span class="o">=</span> <span class="n">get_table</span><span class="o">.</span><span class="n">arrow_schema</span>  
    	<span class="n">batches</span> <span class="o">=</span> <span class="n">get_table</span><span class="o">.</span><span class="n">select</span><span class="p">()</span>  
    	<span class="n">restored_batches</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">table_name</span><span class="p">,</span> <span class="n">batches</span><span class="p">))</span>  
    	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully accessed table &#39;</span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&#39; from schema &#39;</span><span class="si">{</span><span class="n">schema_name</span><span class="si">}</span><span class="s2">&#39; in the snapshot.&quot;</span><span class="p">)</span>  
   
    	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Accessing the new bucket for restoration...&quot;</span><span class="p">)</span>  
    	<span class="n">restored_bucket</span> <span class="o">=</span> <span class="n">tx</span><span class="o">.</span><span class="n">bucket</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">vastdb_new_bucket</span><span class="p">)</span>  
   
    	<span class="c1"># Check if the schema already exists  </span>
    	<span class="k">try</span><span class="p">:</span>  
        	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Checking if schema &#39;</span><span class="si">{</span><span class="n">schema_name</span><span class="si">}</span><span class="s2">&#39; exists...&quot;</span><span class="p">)</span>  
        	<span class="n">restored_schema</span> <span class="o">=</span> <span class="n">restored_bucket</span><span class="o">.</span><span class="n">schema</span><span class="p">(</span><span class="n">schema_name</span><span class="p">)</span>  
        	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Schema &#39;</span><span class="si">{</span><span class="n">schema_name</span><span class="si">}</span><span class="s2">&#39; already exists. Using the existing schema.&quot;</span><span class="p">)</span>  
    	<span class="k">except</span> <span class="n">vastdb</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">MissingSchema</span><span class="p">:</span>  
        	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating schema &#39;</span><span class="si">{</span><span class="n">schema_name</span><span class="si">}</span><span class="s2">&#39;...&quot;</span><span class="p">)</span>  
        	<span class="n">restored_schema</span> <span class="o">=</span> <span class="n">restored_bucket</span><span class="o">.</span><span class="n">create_schema</span><span class="p">(</span><span class="n">schema_name</span><span class="p">)</span>  
        	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created new schema &#39;</span><span class="si">{</span><span class="n">schema_name</span><span class="si">}</span><span class="s2">&#39; for restoration.&quot;</span><span class="p">)</span>  
   
    	<span class="c1"># Log table creation or usage  </span>
    	<span class="k">try</span><span class="p">:</span>  
        	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating table &#39;</span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&#39;...&quot;</span><span class="p">)</span>  
        	<span class="n">restored_table</span> <span class="o">=</span> <span class="n">restored_schema</span><span class="o">.</span><span class="n">create_table</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">table_schema</span><span class="p">)</span>  
        	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created new table &#39;</span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&#39; for restoration.&quot;</span><span class="p">)</span>  
    	<span class="k">except</span> <span class="n">vastdb</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">TableExists</span><span class="p">:</span>  
        	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table &#39;</span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&#39; already exists. Using the existing table...&quot;</span><span class="p">)</span>  
        	<span class="n">restored_table</span> <span class="o">=</span> <span class="n">restored_schema</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">table_name</span><span class="p">)</span>  
        	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Table &#39;</span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&#39; already exists. Using the existing table.&quot;</span><span class="p">)</span>  
   
    	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Inserting data into the restored table...&quot;</span><span class="p">)</span>  
    	<span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">batches</span><span class="p">:</span>  
        	<span class="n">restored_table</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>  
    	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Data restored successfully to table &#39;</span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&#39; in schema &#39;</span><span class="si">{</span><span class="n">schema_name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>  
	<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  
    	<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to restore table &#39;</span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&#39; in schema &#39;</span><span class="si">{</span><span class="n">schema_name</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
    	<span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  
   
   
<span class="c1"># Function to handle the restoration process for all schemas and tables  </span>
<span class="k">def</span> <span class="nf">process_all_schemas</span><span class="p">(</span><span class="n">snapshot</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">restored_batches</span><span class="p">):</span>  
	<span class="k">try</span><span class="p">:</span>  
    	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Processing all schemas...&quot;</span><span class="p">)</span>  
    	<span class="n">schemas</span> <span class="o">=</span> <span class="n">snapshot</span><span class="o">.</span><span class="n">schemas</span><span class="p">()</span>  
    	<span class="k">for</span> <span class="n">schema</span> <span class="ow">in</span> <span class="n">schemas</span><span class="p">:</span>  
        	<span class="n">schema_name</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">name</span>  
        	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing schema &#39;</span><span class="si">{</span><span class="n">schema_name</span><span class="si">}</span><span class="s2">&#39;...&quot;</span><span class="p">)</span>  
        	<span class="n">tables</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">tables</span><span class="p">()</span>  
        	<span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tables</span><span class="p">:</span>  
            	<span class="n">table_name</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">name</span>  
            	<span class="n">restore_table</span><span class="p">(</span><span class="n">schema_name</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">snapshot</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">restored_batches</span><span class="p">)</span>  
	<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  
    	<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to process schemas: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
    	<span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  
   
   
<span class="c1"># Step 1: Access the specified snapshot and restore all schemas and tables  </span>
<span class="n">restored_batches</span> <span class="o">=</span> <span class="p">[]</span>  
<span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">tx</span><span class="p">:</span>  
	<span class="k">try</span><span class="p">:</span>  
    	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Accessing the bucket...&quot;</span><span class="p">)</span>  
    	<span class="n">bucket</span> <span class="o">=</span> <span class="n">tx</span><span class="o">.</span><span class="n">bucket</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">vastdb_bucket</span><span class="p">)</span>  
    	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Listing available snapshots...&quot;</span><span class="p">)</span>  
    	<span class="n">available_snapshots</span> <span class="o">=</span> <span class="n">bucket</span><span class="o">.</span><span class="n">snapshots</span><span class="p">()</span>  
    	<span class="n">snapshot_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">snap</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">snap</span> <span class="ow">in</span> <span class="n">available_snapshots</span><span class="p">]</span>  
   
    	<span class="c1"># Text-based selection of snapshot  </span>
    	<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Available snapshots:&quot;</span><span class="p">)</span>  
    	<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">snap_name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">snapshot_names</span><span class="p">):</span>  
        	<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">idx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">snap_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
    	<span class="n">selected_index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter the number corresponding to the snapshot you want to use: &quot;</span><span class="p">))</span> <span class="o">-</span> <span class="mi">1</span>  
   
    	<span class="k">if</span> <span class="n">selected_index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">selected_index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">snapshot_names</span><span class="p">):</span>  
        	<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Invalid selection.&quot;</span><span class="p">)</span>  
        	<span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  
   
    	<span class="n">snapshot_name</span> <span class="o">=</span> <span class="n">snapshot_names</span><span class="p">[</span><span class="n">selected_index</span><span class="p">]</span>  
   
    	<span class="c1"># Log that the snapshot is found  </span>
    	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Snapshot &#39;</span><span class="si">{</span><span class="n">snapshot_name</span><span class="si">}</span><span class="s2">&#39; found. Proceeding...&quot;</span><span class="p">)</span>  
    	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Accessing snapshot &#39;</span><span class="si">{</span><span class="n">snapshot_name</span><span class="si">}</span><span class="s2">&#39;...&quot;</span><span class="p">)</span>  
    	<span class="n">snapshot</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">snap</span> <span class="k">for</span> <span class="n">snap</span> <span class="ow">in</span> <span class="n">available_snapshots</span> <span class="k">if</span> <span class="n">snap</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">snapshot_name</span><span class="p">)</span>  
   
    	<span class="c1"># Process all schemas and tables  </span>
    	<span class="n">process_all_schemas</span><span class="p">(</span><span class="n">snapshot</span><span class="p">,</span> <span class="n">tx</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">restored_batches</span><span class="p">)</span>  
	<span class="k">except</span> <span class="n">vastdb</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">MissingSnapshot</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  
    	<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Snapshot &#39;</span><span class="si">{</span><span class="n">snapshot_name</span><span class="si">}</span><span class="s2">&#39; not found in bucket &#39;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">vastdb_bucket</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
    	<span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  
	<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  
    	<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to access snapshot or schemas: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
    	<span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  
   
<span class="c1"># Step 3: Execute query using DuckDB and print the result  </span>
<span class="k">try</span><span class="p">:</span>  
	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Executing query using DuckDB...&quot;</span><span class="p">)</span>  
	<span class="k">for</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">batches</span> <span class="ow">in</span> <span class="n">restored_batches</span><span class="p">:</span>  
    	<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">batch</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">batches</span><span class="p">):</span>  
        	<span class="n">batch_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">_batch_</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">&quot;</span>  
        	<span class="n">conn</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">batch_name</span><span class="p">,</span> <span class="n">batch</span><span class="p">)</span>  
        	<span class="n">result</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SELECT \* FROM </span><span class="si">{</span><span class="n">batch_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">fetch_arrow_table</span><span class="p">()</span>  
        	<span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Query executed successfully for </span><span class="si">{</span><span class="n">batch_name</span><span class="si">}</span><span class="s2">. Printing result...&quot;</span><span class="p">)</span>  
        	<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>  
	<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Data fetched and printed successfully.&quot;</span><span class="p">)</span>  
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  
	<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to execute query or fetch data: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  
	<span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="usage-example">
<h2>Usage Example<a class="headerlink" href="#usage-example" title="Link to this heading">#</a></h2>
<p>To run the script, you will need to:</p>
<ol class="arabic simple">
<li><p><strong>Ensure Python Dependencies Are Installed</strong>: Install the required Python libraries using pip:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">vastdb</span> <span class="n">duckdb</span> <span class="n">pandas</span> <span class="n">ibis</span> <span class="n">pydantic</span> <span class="n">logging</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><strong>Run the Script</strong>: Execute the script using Python:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">restore_vastdb</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>Select desired Snapshot:</strong> to use from the list:</p></li>
</ol>
<p><img alt="restore list" src="../../_images/restore_image.png" /></p>
<ol class="arabic simple" start="4">
<li><p><strong>Check Logs</strong>: The script logs important information about the restore process. Use the logs to verify that the connection is established and that all tables are restored successfully.</p></li>
</ol>
</section>
<section id="quick-usage-demo">
<h2>Quick Usage Demo<a class="headerlink" href="#quick-usage-demo" title="Link to this heading">#</a></h2>
<video width="750" controls autoplay>
  <source src="../../_static/videos/video_1280.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
</section>
<section id="key-functions-explained">
<h2>Key Functions Explained<a class="headerlink" href="#key-functions-explained" title="Link to this heading">#</a></h2>
<section id="restore-table-schema-name-table-name-snapshot-tx-config">
<h3><code class="docutils literal notranslate"><span class="pre">restore_table(schema_name,</span> <span class="pre">table_name,</span> <span class="pre">snapshot,</span> <span class="pre">tx,</span> <span class="pre">config)</span></code><a class="headerlink" href="#restore-table-schema-name-table-name-snapshot-tx-config" title="Link to this heading">#</a></h3>
<p>This function handles the restoration of a single table:</p>
<ul class="simple">
<li><p>Connects to the specified schema and table in the snapshot.</p></li>
<li><p>Creates the schema and table in the target bucket if they do not exist.</p></li>
<li><p>Inserts data from the snapshot to the new table in the restored bucket.</p></li>
</ul>
</section>
<section id="process-all-schemas-snapshot-tx-config">
<h3><code class="docutils literal notranslate"><span class="pre">process_all_schemas(snapshot,</span> <span class="pre">tx,</span> <span class="pre">config)</span></code><a class="headerlink" href="#process-all-schemas-snapshot-tx-config" title="Link to this heading">#</a></h3>
<p>This function iterates over all schemas in the snapshot and restores each table.</p>
<ul class="simple">
<li><p>It uses <code class="docutils literal notranslate"><span class="pre">restore_table()</span></code> to handle each table within a schema.</p></li>
</ul>
</section>
<section id="duckdb-integration">
<h3><code class="docutils literal notranslate"><span class="pre">DuckDB</span> <span class="pre">Integration</span></code><a class="headerlink" href="#duckdb-integration" title="Link to this heading">#</a></h3>
<p>After restoring data, DuckDB is used to execute queries and print results, providing a way to verify that data restoration is successful.</p>
</section>
</section>
<section id="troubleshooting-tips">
<h2>Troubleshooting Tips<a class="headerlink" href="#troubleshooting-tips" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><strong>Connection Errors</strong>: Ensure that the VastDB endpoint and credentials are correct. Check network connectivity if connection issues persist.</p></li>
<li><p><strong>Missing Snapshot</strong>: Verify that the specified snapshot exists in the bucket by listing available snapshots in the logs.</p></li>
<li><p><strong>Table Restoration Failures</strong>: Ensure that there are no conflicting table names or schema issues in the target bucket.</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./vast_database/admin"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="vastdb_py_setup.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Vast DB set up using API</p>
      </div>
    </a>
    <a class="right-next"
       href="secure_deployment.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Secure Deployment Pattern</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#use-case-example">Use-Case example</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-configuration">Example Configuration</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#script-sections-to-edit">Script Sections to Edit</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Example Configuration</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#usage-example">Usage Example</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-usage-demo">Quick Usage Demo</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#key-functions-explained">Key Functions Explained</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#restore-table-schema-name-table-name-snapshot-tx-config"><code class="docutils literal notranslate"><span class="pre">restore_table(schema_name,</span> <span class="pre">table_name,</span> <span class="pre">snapshot,</span> <span class="pre">tx,</span> <span class="pre">config)</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#process-all-schemas-snapshot-tx-config"><code class="docutils literal notranslate"><span class="pre">process_all_schemas(snapshot,</span> <span class="pre">tx,</span> <span class="pre">config)</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#duckdb-integration"><code class="docutils literal notranslate"><span class="pre">DuckDB</span> <span class="pre">Integration</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#troubleshooting-tips">Troubleshooting Tips</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By VAST Data
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <p>
  <a href="https://vast-data.github.io/data-platform-field-docs/feedback/intro.html">Provide Feedback</a>
</p>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>